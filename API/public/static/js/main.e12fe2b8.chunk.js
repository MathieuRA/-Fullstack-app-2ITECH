(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{20:function(e,t,r){},21:function(e,t,r){},25:function(e,t,r){},26:function(e,t,r){},27:function(e,t,r){},28:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r(1),c=r.n(s),a=r(13),i=r.n(a),o=(r(20),r(10)),u=(r(21),function(){return Object(n.jsxs)("div",{className:"jumbotron home",children:[Object(n.jsx)("h1",{className:"display-4",children:"RAISIN Mathieu"}),Object(n.jsx)("p",{className:"lead",children:'D\xe9veloppement d\'une application fullstack. Petit projet r\xe9aliser dans le cursus de formation "Concepteur d\xe9veloppeur web" de chez 2ItechAcademy'}),Object(n.jsx)("hr",{className:"my-4"}),Object(n.jsxs)("p",{children:["Backend - Node.js avec Typescript",Object(n.jsx)("br",{}),"Base de donner - NOSQL avec MongoDB",Object(n.jsx)("br",{}),"Frontend - React.js avec JSX"]}),Object(n.jsx)("p",{className:"lead",children:Object(n.jsx)("a",{className:"btn btn-primary btn-lg",role:"button",href:"https://github.com/MathieuRA/-Fullstack-app-2ITECH",target:"_blank",children:"Liens GITHUB"})})]})}),l=r(6),j=r(7),d=r(9),b=r(8),h=r(2),p=r.n(h),f=r(3),m=r(4),O=r(5),x=function(e){Object(d.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){n.setState((function(e){return{user:Object(O.a)(Object(O.a)({},n.props.contents),e.user)}}))},n.componentDidUpdate=function(e){Object(m.isEqual)(e,n.state)},n.toogleEditing=function(){n.setState((function(e){return{isEditing:!e.isEditing}}))},n._editField=function(e,t){switch(t){case"firstname":case"lastname":case"job":n.setState((function(t){return{user:Object(O.a)(Object(O.a)({},t.user),{},{firstname:e.target.value})}}))}},n.state={isEditing:!1,user:{id:n.props.id}},n}return Object(j.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.contents,s=t.handleEdit,c=t.hasEditedUser,a=0,i={firstname:r.firstname,lastname:r.lastname,job:r.job};return Object(n.jsxs)("div",{className:"card-body",onDoubleClick:this.toogleEditing,children:[Object(m.map)(i,(function(t){var r=Object.keys(i)[a];if("__v"!==r&&"_id"!==r)return a++,Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(v,{content:t,isEditing:e.state.isEditing,onChange:function(t){return e._editField(t,r)},label:r},a)});a++})),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:["Double clique pour"," ",this.state.isEditing?Object(n.jsx)("span",{children:"annuler"}):Object(n.jsx)("span",{children:"modifier"})]}),Object(n.jsx)("br",{}),this.state.isEditing&&Object(n.jsx)("button",{onClick:function(){return s(e.state,c,e.toogleEditing)},className:"btn btn-outline-info",children:"Modifier"})]})}}]),r}(c.a.Component),v=function(e){var t=e.content,r=e.isEditing,s=e.onChange,c=e.label,a="firstname"===c?"title":"lastname"===c?"text mb-2":"subtitle text-muted";return r?Object(n.jsx)("input",{className:"card-".concat(a),placeholder:t,onChange:s}):Object(n.jsxs)("p",{className:"card-".concat(a),children:[" ",t]})},N=Notification=function(e){var t=e.children,r=e.$class;return Object(n.jsx)("p",{className:"alert "+r,children:t})},g=(r(25),function(e){var t=e.setError,r=e.setSuccess,c=Object(s.useRef)(),a=Object(s.useRef)(),i=Object(s.useRef)(),o=function(){var e=Object(f.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,fetch("http://localhost:3000/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w(c,i,a))});case 4:c.current.value="",i.current.value="",a.current.value="",r("Utilisateur \xe0 bien \xe9t\xe9 ajouter"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t("L'ajout de l'utilisateur \xe0 \xe9chouer ");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"containerUser",children:Object(n.jsxs)("form",{onSubmit:o,children:[Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("label",{children:["Nom:",Object(n.jsx)("input",{id:"firstname",name:"firstname",ref:c,type:"text",className:"form-control"})]})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("label",{children:["Pr\xe9nom:",Object(n.jsx)("input",{id:"lastname",name:"lastname",ref:a,type:"text",className:"form-control"})]})})]}),Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("label",{children:["M\xe9tier:",Object(n.jsx)("input",{id:"job",name:"job",ref:i,type:"text",className:"form-control"})]})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsx)("input",{type:"submit",value:"Envoyer",className:"btn btn-outline-primary"})})]})]})})}),y=function(e){var t=e.hasEditedUser,r=e.setError,s=e.setSuccess,c=e.users;return Object(m.isEmpty)(c)?Object(n.jsx)("p",{children:"Aucun utilisateur"}):Object(m.map)(c,(function(e){return Object(n.jsxs)("div",{className:"card mb-3",children:[Object(n.jsx)("button",{onClick:function(){return E(t,r,s,e._id)},"aria-label":"Close",className:"close",type:"button",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),Object(n.jsx)(x,{contents:e,handleEdit:S,hasEditedUser:t,id:e._id})]},e._id)}))},E=function(){var e=Object(f.a)(p.a.mark((function e(t,r,n,s){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/user/".concat(s),{method:"DELETE"});case 2:200===e.sent.status?(n("Utilisateur supprimer"),t()):(r("Erreur lors de la suppression"),t());case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,s){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(p.a.mark((function e(t,r,n){var s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.user,e.next=3,fetch("http://localhost:3000/user/".concat(s.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 3:return c=e.sent,e.next=6,c.json();case 6:n(),r();case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/users");case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e,t,r){return{firstname:e.current.value,job:t.current.value,lastname:r.current.value}},C=function(e){Object(d.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).hasEditedUser=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,k();case 3:e.t1=e.sent,e.t2={users:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e)}))),n.setError=function(e){return n.setState({error:e})},n.setSuccess=function(e){return n.setState({success:e})},n._setRoute=function(e){console.log(e),n.setState({route:e})},n.state={error:"",route:"get",success:"",usersLoaded:!1},n}return Object(j.a)(r,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,k();case 3:e.t1=e.sent,e.t2={users:e.t1},e.t3=function(){t.setState({usersLoaded:!0})},e.t0.setState.call(e.t0,e.t2,e.t3);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.hasEditedUser()}},{key:"render",value:function(){var e=this,t=this.state,r=t.error,s=t.success,c=t.route,a=t.usersLoaded,i=t.users;return Object(n.jsxs)(n.Fragment,{children:[r&&Object(n.jsx)(N,{$class:"alert-danger",children:r}),s&&Object(n.jsx)(N,{$class:"alert-success",children:s}),Object(n.jsx)("div",{children:"get"===c?Object(n.jsx)("button",{className:"btn alert-info userButton",onClick:function(){return e._setRoute("post")},children:"Ajouter un utilisateur"}):Object(n.jsx)("button",{className:"btn alert-info userButton",onClick:function(){return e._setRoute("get")},children:"Tout les utilisateurs"})}),"get"===c&&Object(n.jsx)("div",{className:"containerFlex",children:a?Object(n.jsx)(y,{hasEditedUser:this.hasEditedUser,setError:this.setError,setSuccess:this.setSuccess,users:i}):Object(n.jsx)("p",{children:"Chargement des utilisateurs ..."})}),"post"===c&&Object(n.jsx)(g,{setError:this.setError,setSuccess:this.setSuccess})]})}}]),r}(c.a.Component),_=r(14),T=(r(26),function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}),D=function(e){var t=e.users,r=e.error,c=e.success,a=e.refresh,i=Object(s.useRef)(),u=Object(s.useRef)(),l=Object(s.useRef)(),j=Object(s.useState)(),d=Object(o.a)(j,2),b=d[0],h=d[1];return Object(n.jsx)("div",{className:"formProject pt-4",children:Object(n.jsxs)("form",{onSubmit:function(e){return U(e,i.current.value,b,l.current.value,u.current.value,r,c,a)},children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("label",{children:["Titre:",Object(n.jsx)("input",{id:"title",name:"title",ref:i,type:"text",className:"form-control"})]})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("label",{children:["Technologie:",Object(n.jsx)(_.a,{options:[{value:"css",label:"CSS"},{value:"html",label:"HTML"},{value:"javascript",label:"Javascript"},{value:"node",label:"Node.js"},{value:"php",label:"PHP"},{value:"react",label:"React.js"},{value:"symphony",label:"Symphony"},{value:"typscript",label:"Typescript"},{value:"wordpress",label:"Wordpress"}],onChange:h,value:b})]})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("label",{children:["Le d\xe9veloppeur",Object(n.jsx)("div",{children:Object(n.jsx)("select",{ref:l,children:Object(m.map)(t,(function(e){return Object(n.jsx)("option",{value:e._id,children:e.firstname},e._id)}))})})]})})]}),Object(n.jsx)("div",{className:"form-row",children:Object(n.jsx)("div",{className:"col",children:Object(n.jsx)("label",{children:Object(n.jsx)("input",{type:"date",name:"created_date",id:"created_date",ref:u})})})})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"Envoyer"})]})})},F=function(e){var t=e.projects,r=e.error,s=e.success,c=e.refresh;return Object(m.isEmpty)(t)?Object(n.jsx)("p",{children:"Aucun projet"}):Object(n.jsx)("div",{className:"projectsContainer mt-3",children:Object(m.map)(t,(function(e){return Object(n.jsx)(R,{project:e,error:r,success:s,refresh:c},e._id)}))})},R=function(e){var t=e.project,r=e.error,c=e.success,a=e.refresh,i=Object(s.useState)(),u=Object(o.a)(i,2),l=u[0],j=u[1];return A(t.developper_id,j),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"card project mb-3",children:[Object(n.jsx)("button",{onClick:function(){return P(t._id,c,r,a)},"aria-label":"Close",className:"close",type:"button",children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),Object(n.jsx)("div",{className:"card-img-top",style:{backgroundColor:T()}}),Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h5",{className:"card-title",children:t.title}),l&&Object(n.jsx)("div",{children:Object(n.jsxs)("p",{className:"card-text",children:["D\xe9veloppeur: ",l]})})]}),Object(n.jsx)("ul",{className:"list-group list-grou-flush",children:Object(m.map)(t.techno,(function(e){return Object(n.jsx)("li",{className:"list-group-item",style:{color:T()},children:e.label},e.value)}))})]})})},P=function(){var e=Object(f.a)(p.a.mark((function e(t,r,n,s){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/project/".concat(t),{method:"DELETE"});case 2:200===e.sent.status?(r("Suppression effectuer"),s()):(n("Erreur lors de la suppresion"),s());case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,s){return e.apply(this,arguments)}}(),U=function(e,t,r,n,s,c,a,i){e.preventDefault(),L(t,r,n,new Date(s).getTime(),c,a,i)},L=function(){var e=Object(f.a)(p.a.mark((function e(t,r,n,s,c,a,i){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M(t,r,n,s))});case 2:201===e.sent.status?(a("Projet ajouter avec success"),i()):(c("Erreur lors de l'ajoute du projet"),i());case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,s,c,a,i){return e.apply(this,arguments)}}(),M=function(e,t,r,n){return{title:e,techno:t,developper_id:r,created_date:n}},B=function(){var e=Object(f.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/users");case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(p.a.mark((function e(t,r){var n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/user/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return s=e.sent,r(s.firstname),e.abrupt("return",s.firstname);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),J=function(){var e=Object(f.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/projects");case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){Object(d.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).asEditedPOroject=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,J();case 3:return e.t1=e.sent,e.t2={projects:e.t1},e.abrupt("return",e.t0.setState.call(e.t0,e.t2));case 6:case"end":return e.stop()}}),e)}))),n.setRoute=function(e){return n.setState({route:e})},n.setError=function(e){return n.setState({error:e})},n.setSuccess=function(e){return n.setState({success:e})},n.state={error:"",loaded:!1,route:"get",success:""},n}return Object(j.a)(r,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,B();case 3:return e.t1=e.sent,e.next=6,J();case 6:e.t2=e.sent,e.t3={users:e.t1,projects:e.t2},e.t4=function(){return t.setState({loaded:!0})},e.t0.setState.call(e.t0,e.t3,e.t4);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.route,s=t.users,c=t.error,a=t.success,i=t.loaded,o=t.projects;return Object(n.jsxs)(n.Fragment,{children:[c&&Object(n.jsx)(N,{$class:"alert-error",children:c}),a&&Object(n.jsx)(N,{$class:"alert-success",children:a}),"get"===r?Object(n.jsx)("button",{className:"btn alert-info userButton",onClick:function(){return e.setRoute("post")},children:"Ajouter un projet"}):Object(n.jsx)("button",{className:"btn alert-info userButton",onClick:function(){return e.setRoute("get")},children:"Voir tout les projets"}),"get"===r&&(i?Object(n.jsx)(F,{projects:o,error:this.setError,success:this.setSuccess,refresh:this.asEditedPOroject}):Object(n.jsx)("p",{children:"Chargement ..."})),"post"===r&&Object(n.jsx)(D,{users:s,error:this.setError,success:this.setSuccess,refresh:this.asEditedPOroject})]})}}]),r}(c.a.Component);r(27);var $=function(){var e=Object(s.useState)("home"),t=Object(o.a)(e,2),r=t[0],c=t[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{children:Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(n.jsx)("a",{className:"navbar-brand",onClick:function(){return c("home")},children:"Fullstack Typescript / JSX"}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)("li",{className:"nav-item active",children:Object(n.jsxs)("a",{className:"nav-link",onClick:function(){return c("home")},children:["Accueil"," ",Object(n.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",onClick:function(){return c("users")},children:"Utilisateurs"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",onClick:function(){return c("projects")},children:"Projets"})})]})})]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("section",{className:"mainSection",children:["home"===r&&Object(n.jsx)(u,{}),"users"===r&&Object(n.jsx)(C,{}),"projects"===r&&Object(n.jsx)(I,{})]})})]})},H=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,29)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;r(e),n(e),s(e),c(e),a(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)($,{})}),document.getElementById("root")),H()}},[[28,1,2]]]);
//# sourceMappingURL=main.e12fe2b8.chunk.js.map